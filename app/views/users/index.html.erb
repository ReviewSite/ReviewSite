<h1>Manage Users</h1>

<div class="new-review"><%= link_to 'New User', new_user_path, :class => 'button' %></div>

<table id="users" class="datatable" data-source="<%= users_url(format: "json") %>">
  <thead>
  <th class="name-col">Name</th>
  <th class="name-col">Email</th>
  <th class="boolean-col">AC</th>
  <th class="boolean-col">Admin</th>
  <th class="action-col"></th>
  </thead>
  <tbody>

  </tbody>
</table>

<br class="spacer" />


<script>
  $('table#users').dataTable({
    sPaginationType: "full_numbers",
    bServerSide: true,
    sAjaxSource: $('#users').data('source'),
    oLanguage: {
        sInfoFiltered: ""
    },
    aoColumnDefs: [
      { bSortable: false, aTargets: [ 4 ] },
      { sClass: "admin", aTargets: [3] },
      { sClass: "ac", aTargets: [2] }
    ],
    fnCreatedRow: function(nRow, aData, iDataIndex){
      var email = aData[1];
      $(nRow).attr('id', email.substr(0, email.indexOf('@')));
    } 
  });
</script>
